# Chapter 7. Express 미들웨어 & API 응답 통일 & 에러 핸들링 (1)

<aside>
<img src="https://www.notion.so/icons/list_gray.svg" alt="https://www.notion.so/icons/list_gray.svg" width="40px" /> **목차**

</aside>

## 📝 학습 목표

1. Express 미들웨어 이해하기
2. Express에서 API 응답 및 오류 핸들링 통일하기

## 📸 잠깐! 스터디 인증샷은 찍으셨나요?

<aside>
💡 스터디장께서는 대표로 매 주차 스터디 인증샷을 남겨주세요!
사진을 저장하여 이미지 업로드할 수도 있고, 복사 & 붙여넣기를 통해 업로드할 수도 있습니다.

</aside>

[](https://www.notion.so)

## 📑 7주차 주제

이번 주에는 Express 미들웨어에 대해 이해하고, API 응답과 오류 핸들링을 어떻게 통일하는지 알아볼 예정입니다.

## 🔖 7주차를 시작하며

개발을 하다 보면, “프레임워크”라는 말을 자주 접하게 됩니다.

그렇다면 프레임워크는 무엇일까요? 

**프레임워크(Framework)**는 “기본 구조” 또는 “틀”이라는 뜻을 갖고 있습니다. 

백엔드 개발로 적용해 본다면 우리가 서버를 만들 때 **자주 반복되는 패턴들을 미리 구현해 둔 틀**이라고 할 수 있습니다. 

예를 들어, Node.js만 사용한다고 하면 우리가 직접 이 모든 것을 구현해야 합니다. 

- JSON 응답 처리
- 오류 처리
- 로그 남기기
- URL에 따라 다른 기능 수행(라우팅) 등..

이걸 매번 직접 구현하는 건 번거롭고 시간 낭비입니다.

그래서 이런 공통 동작을 미리 처리해주는 프레임워크가 필요한 것입니다. 

프레임워크는 개발자가 **비지니스 로직**에만 집중할 수 있도록 도와주는 “뼈대” 입니다. 

라이브러리와 헷갈릴 수 있는 개념이지만, 라이브러리와는 다릅니다.

프레임워크는 전체 흐름을 주도하는 대신, 라이브러리는 개발자가 필요한 순간 호출해서 사용합니다.

그리고 프레임워크의 예시로는 Express, Nest.js, React 같은 것들이 있지만 라이브러리는 Axios, bcrypt 같은 것들이 있습니다. 

<aside>
💡

프레임워크는 “툴”이고, 라이브러리는 “도구” 입니다.

</aside>

이제 본격적으로 이번 주의 주인공인 **Express**를 살펴봅시다.

## 📖 7주차 본문

Node.js로 백엔드를 개발할 때, 대부분의 사람들이 Express는 꼭 함께 사용합니다. 

인기 있는 서버 프레임워크인 Nest.js도 기본적으로는 Express를 기반으로 하고 있고, Express는 사실상 Node.js의 표준 서버 프레임워크라고 불릴 정도로 많이 사용합니다.

그러면 이 Express는 대체 뭐길래 사람들이 필수로 사용할까요?

> **“*Express is fast, unopinionated, minimalist web framework for node.js.”***
Express는 Node.js를 위한 빠르고, 중립적이고, 가벼운 웹 프레임워크이다.
> 

ㅡ [expressjs.com](http://expressjs.com) 공식 홈페이지 중에서 

이러한 가볍고 유연하게 구성할 수 있게 만든 것은 미들웨어 구조가 큰 일을 해냈습니다.

또한 라우팅이 편리하며 직관적이라는 장점 등 다양한 장점들이 많아, 현재 Express는 Node.js를 사용해 백엔드를 개발할 때에는 꼭 빠지지 않고 사용하는 프레임워크가 되었습니다.

### ⚙️ Express 미들웨어

<aside>
💡

Express의 미들웨어를 사용해보며 이해해보도록 하겠습니다.

</aside>

[Chapter 7. Express 미들웨어 & API 응답 통일 & 에러 핸들링 - Express 미들웨어 (1)](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20-%20Expr%202a5b57f4596b8134bdbceaae28703a46.md)

### 🖼️ API 응답 통일 & 에러 핸들링

<aside>
💡

미들웨어를 이용해 API 응답을 통일해보도록 하겠습니다.

</aside>

[Chapter 7. Express 미들웨어 & API 응답 통일 & 에러 핸들링 - API 응답 통일 & 에러 핸들링 (1)](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20-%20API%20%202a5b57f4596b81f28279dcfd71571604.md)

## 🎯 핵심 키워드

<aside>
💡 주요 내용들을 정리하고, 여러분만의 생각을 통해 정리해보세요!

- 레퍼런스를 참고하여 정의, 속성, 장단점 등을 적어주셔도 괜찮습니다.
- 조사는 공식 홈페이지 **Best**, 블로그(최신 날짜) **Not Bad**
</aside>

- 미들웨어
    - 요청과 응답 사이에서 동작하는 함수
    - 로깅, 인증, 데이터 파싱 등 반복되는 기능을 중앙에서 처리할 수 있다.
- HTTP 상태 코드
    - 클라이언트 요청 결과를 숫자로 표현,
    - 200번대는 성공, 400번대는 클라이언트 오류, 500번대는 서버 오류
- 에러 핸들링(Error Handling)
    - 서버에서 발생한 오류를 잡아 사용자에게 의미 있는 메시지와 상태 코드를 반환한다.
    - Express에서는 next(err)와 전용 미들웨어로 처리

## 🧩 요약 정리

<aside>
💡

이번 주차 워크북을 정리해봅시다! 

이번 주차 워크북이 개념 중심이라면 개념을 정리하고, 실습 중심이라면 1개 이상의 실습 코드 분석 내용을 작성해주세요. (🎯 핵심 키워드에서 이미 정리한 내용은 제외해주셔도 괜찮습니다.)

</aside>

## ⚠️ 스터디 진행 방법

**1. 스터디 전 준비**

- 핵심 키워드와 미션을 모두 수행해 주세요.
- 워크북을 진행하면서 모르는 부분이나 질문하고 싶은 내용이 있다면 정리해 주세요.

**2. 스터디 시간**

- 서로 질문하고 답변해 주세요.
    - 워크북을 진행하면서 몰랐던 부분이나 미션 피드백을 통해 생긴 질문을 공유하고 답변해 주세요.
- 핵심 키워드와 미션을 공유해 주세요.
    - 각자가 정리한 핵심 키워드와 미션을 서로 공유해 주세요.
    - 파트장(또는 스터디장)은 파트원들의 수행 내용을 보고 피드백할 부분을 정리하여 전달해 주세요.
        - 스터디에 파트장이 없거나 인원이 부족한 경우, 이 과정은 생략할 수 있습니다.

**3. 스터디 후 회고**

- 스터디가 끝난 후, 배운 점과 새로 알게 된 점을 기록해 주세요.

<aside>
💌

스터디를 진행한 후에는 📮 [**스터디 피드백 구글 폼**](https://docs.google.com/forms/d/e/1FAIpQLSewNkp1eswtsPt50BKK_Gjsyi7KdPytgT24MysqNzAaroDBnw/viewform) 양식을 통해 스터디 피드백을 남겨주세요. 여러분의 솔직한 피드백으로 더 나은 워크북과 스터디를 만들어가고자 합니다. 많은 의견 부탁드립니다! 🙏

</aside>

## ✅ 실습 체크리스트

- [x]  Express 미들웨어
- [x]  API 응답 통일&에러 핸들링

## ☑️ 실습 인증

<aside>
💡

웹 브라우저, IDE(VSCode 편집기) 및 터미널 이미지(스크린샷), 설명 등을 자유롭게 남겨주세요. 실습을 진행한 과정이 순차적으로 잘 드러나면 가장 좋습니다.

</aside>

> **GitHub 저장소 주소**
> 
> 
> https://github.com/… (자신의 GitHub 저장소 주소를 입력해주세요.)
> 

![스크린샷 2025-11-12 오후 11.45.30.png](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-11-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.45.30.png)

![스크린샷 2025-11-12 오후 11.45.41.png](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-11-12_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.45.41.png)

![스크린샷 2025-11-13 오후 2.47.52.png](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-11-13_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.47.52.png)

## ✨ 위클리 스크럼 과제

---

위클리 스크럼 과제는 OO주차 위클리 스크럼 아이스 브레이킹과 공통 질문을 모두 작성한 후, 아래에 질문을 복사 붙여넣기 한 다음 다같이 작성해주시면 됩니다. 

1. 지난 6주차에서 처음으로 Prisma ORM을 도입해 보았는데요. 5주차까지 사용했던 `mysql2` 의 순수 SQL 쿼리 방식과 비교했을 때, 어떤 점이 가장 ‘다르다’고 느꼈나요? 
    1. Prisma는 SQL문을 직접 작성하는 mysql2보다 직관적이고 안전하게 느껴졌습니다.
    
2. `prisma migrate dev` 명령어로 DB 스키마를 관리해보니 어땠나요? `ALTER TABLE`  쿼리를 직접 실행하는 대신 `schema.prisma` 파일만 수정하면 되는 방식의 **가장 큰 장점**은 무엇이라고 생각하며, 팀원과 마이그레이션이 충돌하는 상황을 방지하기 위해 어떤 규칙을 정하면 좋을지 이야기해 봅시다.
    1. schema.prisma만 수정하면 되므로 일관된 스키마 관리가 가능하다는 장점이 있습니다
    2. 메인 브랜치에서만 마이그레이션 파일을 수정하고 수정 이후 팀원들에게 pull을 받으라고 알려서 충돌이 일어나는 경우를 피합니다.
3. `mysql2` 로 SQL 쿼리를 직접 짤 때와 Prisma를 쓸 때, 둘 중 어떤 방식이 더 편하게 느껴졌나요? 그 이유는 무엇인가요? 
    1. Prisma.. SQL 문을 하나하나 직접 작성하지 않아도 되고 관계 매핑이 자동으로 되기 때문입니다.
    

## 🔥 미션

<aside>
📍 **주의 사항**

결과물만 올리면 안되고, 중간 과정 또한 기록을 남겨주셔야 합니다.
(API 요청과 응답을 중간 중간 테스트 해보면서!)

**결과물과 중간 과정 모두 기록하여 제출**하라는 뜻입니다.

</aside>

### 🍒 공통 미션

이번 주에는 기존에 구현했던 API의 응답을 검토해주세요.

- 성공 응답의 경우 표준 규격으로 잘 응답이 생성되는지 확인하고 수정해주세요!
- 오류 처리에 대해 점검하고, 오류가 발생할 수 있는 부분들은 커스텀 `Error` 객체를 선언해 던지도록 리팩토링해주세요.
- 7주차 워크북에 소개되었던 `morgan` , `cookie-parser` 등을 본인의 프로젝트 메인 파일 (`index.js` 등)에 `npm install` 하고 `app.use()` 로 적용해 주세요. (`express.json` , `express.urlencoded`은 이미 적용되어 있을 수 있습니다)
- 이후 본인의 깃허브 리포지토리를 만들어 `feature/chapter-07` 브랜치에 올린 후,
**해당 GitHub 링크를 본인 워크북에 포함해오기. (미션 기록란에 링크 제출)**
    
    **❗main 브랜치에 올리지 말 것!** (브랜치 명 꼭 `feature/chapter-07` 아니어도 됨!) **❗**
    
    **❗main 브랜치는 11주차의 `무중단 CI/CD (GitHub Actions + AWS EC2)` 에서 사용 할 예정❗**
    

### 🧙‍♂️ 시니어 미션

- 서버에서 내려주는 응답의 크기가 크면 네트워크 대역폭을 많이 사용하고, 전송 속도 역시 느려질 수 있습니다. 이를 위해 일반적으로는 `gzip` 등의 방식의 압축을 통해 응답을 압축하여 제공하기도 하는데요, `gzip`, `brotli` 등의 압축 방식들에 대해 정리하고 + Express 프로젝트에 응답을 압축하는 미들웨어를 추가해주세요. (단, 너무 작은 응답까지 불필요하게 압축하지 않도록 `threshold` 값을 `0.5kb(512b)`로 설정해주세요.)

## 💪 미션 기록

<aside>
🍀 미션 기록의 경우, 아래 미션 기록 토글 속에 작성하시거나, 페이지를 새로 생성하여 해당 페이지에 기록하여도 좋습니다!

하지만, 결과물만 올리는 것이 아닌, **중간 과정 모두 기록하셔야 한다는 점!** 잊지 말아주세요.

</aside>

- 미션 기록
    
    [[week07]박태경 미션 기록](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/%5Bweek07%5D%EB%B0%95%ED%83%9C%EA%B2%BD%20%EB%AF%B8%EC%85%98%20%EA%B8%B0%EB%A1%9D%202a9b57f4596b80f3a56ecb8e37c788aa.md)
    

## ⚡ 트러블 슈팅

<aside>
💡 실습하면서 생긴 문제들에 대해서, **이슈 - 문제 - 해결** 순서로 작성해주세요.

스스로 해결하기 어렵다면? 스터디원들에게 도움을 요청하거나 **너디너리의 지식IN 채널**에 질문해보세요!

</aside>

- ⚡ 이슈 작성 예시 (이슈가 생기면 아래 버튼을 클릭해 No. 1, No. 2, No. 3, … 으로 작성해서 트러블 슈팅을 꼭 해보세요!)
    
    **`이슈`**
    
    👉 앱 실행 중에 노래 다음 버튼을 누르니까 앱이 종료되었다.
    
    **`문제`**
    
    👉 노래클래스의 데이터리스트의 Size를 넘어서 NullPointException이 발생하여 앱이 종료된 것이었다. 
    
    **`해결`**
    
    👉  노래 다음 버튼을 눌렀을 때 데이터리스트의 Size를 검사해 Size보다 넘어가려고 하면 다음으로 넘어가는 메서드를 실행시키지 않고, 첫 노래로 돌아가게끔 해결
    
    **`참고 레퍼런스`**
    
    - 링크

## 🤔 참고 자료

[참고 자료 목록 (2)](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/%EC%B0%B8%EA%B3%A0%20%EC%9E%90%EB%A3%8C%20%EB%AA%A9%EB%A1%9D%20(2)%202a5b57f4596b81d8b908d65b75bd9970.csv)

---

Copyright © 2024~2025 김수빈(엘빈), 최재영(제리) All rights reserved.

Copyright © 2025 전하경(재서) All rights reserved.

![스크린샷 2025-11-13 오후 2.45.45.png](Chapter%207%20Express%20%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%20&%20API%20%EC%9D%91%EB%8B%B5%20%ED%86%B5%EC%9D%BC%20&%20%EC%97%90%EB%9F%AC%20%ED%95%B8%EB%93%A4%EB%A7%81%20(1)/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-11-13_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.45.45.png)